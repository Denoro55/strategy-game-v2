!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var r=n(19);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return r.Vector}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCellsInCells=t.getQuery=t.logger=t.getPercent=t.getRandomValue=t.getValidatedCells=t.getCellsRange=t.isCellInRange=t.isPolygonInPolygon=t.angleToRadians=t.getAngleBetweenPoints=t.isCellInCells=t.getEmptyCells=t.isPointInPolygon=t.createHexon=t.getEvenXOffset=void 0;var r=n(5);Object.defineProperty(t,"getEvenXOffset",{enumerable:!0,get:function(){return r.getEvenXOffset}});var o=n(29);Object.defineProperty(t,"createHexon",{enumerable:!0,get:function(){return o.createHexon}});var i=n(10);Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return i.isPointInPolygon}});var a=n(30);Object.defineProperty(t,"getEmptyCells",{enumerable:!0,get:function(){return a.getEmptyCells}});var s=n(31);Object.defineProperty(t,"isCellInCells",{enumerable:!0,get:function(){return s.isCellInCells}});var c=n(32);Object.defineProperty(t,"getAngleBetweenPoints",{enumerable:!0,get:function(){return c.getAngleBetweenPoints}});var u=n(33);Object.defineProperty(t,"angleToRadians",{enumerable:!0,get:function(){return u.angleToRadians}});var l=n(34);Object.defineProperty(t,"isPolygonInPolygon",{enumerable:!0,get:function(){return l.isPolygonInPolygon}});var f=n(35);Object.defineProperty(t,"isCellInRange",{enumerable:!0,get:function(){return f.isCellInRange}});var p=n(36);Object.defineProperty(t,"getCellsRange",{enumerable:!0,get:function(){return p.getCellsRange}});var d=n(37);Object.defineProperty(t,"getValidatedCells",{enumerable:!0,get:function(){return d.getValidatedCells}});var h=n(38);Object.defineProperty(t,"getRandomValue",{enumerable:!0,get:function(){return h.getRandomValue}});var v=n(39);Object.defineProperty(t,"getPercent",{enumerable:!0,get:function(){return v.getPercent}});var y=n(40);Object.defineProperty(t,"logger",{enumerable:!0,get:function(){return y.logger}});var g=n(41);Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return g.getQuery}});var b=n(42);Object.defineProperty(t,"isCellsInCells",{enumerable:!0,get:function(){return b.isCellsInCells}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Building=t.Actor=t.Instance=void 0;var r=n(49);Object.defineProperty(t,"Instance",{enumerable:!0,get:function(){return r.Instance}});var o=n(51);Object.defineProperty(t,"Actor",{enumerable:!0,get:function(){return o.Actor}});var i=n(53);Object.defineProperty(t,"Building",{enumerable:!0,get:function(){return i.Building}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=t.Player=t.Selector=t.DrawUtils=t.InstanceUtils=t.Utils=t.Drawer=t.Game=t.LanImitator=t.Lan=t.EventListener=t.App=void 0;var r=n(15);Object.defineProperty(t,"App",{enumerable:!0,get:function(){return r.App}}),Object.defineProperty(t,"EventListener",{enumerable:!0,get:function(){return r.EventListener}}),Object.defineProperty(t,"Lan",{enumerable:!0,get:function(){return r.Lan}}),Object.defineProperty(t,"LanImitator",{enumerable:!0,get:function(){return r.LanImitator}});var o=n(27);Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return o.Game}}),Object.defineProperty(t,"Drawer",{enumerable:!0,get:function(){return o.Drawer}}),Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return o.Utils}}),Object.defineProperty(t,"InstanceUtils",{enumerable:!0,get:function(){return o.InstanceUtils}}),Object.defineProperty(t,"DrawUtils",{enumerable:!0,get:function(){return o.DrawUtils}}),Object.defineProperty(t,"Selector",{enumerable:!0,get:function(){return o.Selector}}),Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return o.Player}});var i=n(73);Object.defineProperty(t,"EventEmitter",{enumerable:!0,get:function(){return i.EventEmitter}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorNames=void 0,function(e){e.warrior="warrior",e.spearman="spearman",e.worker="worker"}(t.ActorNames||(t.ActorNames={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEvenXOffset=void 0;t.getEvenXOffset=function(e,t,n){return void 0===t&&(t=.5),void 0===n&&(n=0),e%2!=0?t:n}},function(e,t,n){"use strict";var r=n(12),o=n.n(r)()((function(e){return e[1]}));o.push([e.i,"body{background-color:bisque;margin:0;font-family:Arial,sans-serif}.canvas-game{background-color:#000}h1{margin-top:0}.menu{text-align:center;padding-top:40px}",""]),t.a=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0;var r=n(17),o=n(18),i=n(20),a=n(21);t.CONFIG={env:a.ENV,drawer:r.DRAWER_CONFIG,stage:o.STAGE_CONFIG,instances:i.INSTANCES_CONFIG}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildingNames=void 0,function(e){e.main="main"}(t.BuildingNames||(t.BuildingNames={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketActions=t.SocketListeners=void 0,function(e){e.getProfileInfo="client:getProfileInfo",e.attackInstance="lan:attackInstance",e.startGame="client:startGame"}(t.SocketListeners||(t.SocketListeners={})),function(e){e.getProfileInfo="client:getProfileInfo",e.attackInstance="lan:attackInstance",e.startGame="client:startGame"}(t.SocketActions||(t.SocketActions={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInPolygon=void 0;t.isPointInPolygon=function(e,t){var n=[],r=[];t.forEach((function(e){n.push(e.x),r.push(e.y)}));for(var o=e.x,i=e.y,a=n.length,s=a-1,c=0,u=0;u<a;u++)(r[u]<=i&&i<r[s]||r[s]<=i&&i<r[u])&&o>(n[s]-n[u])*(i-r[u])/(r[s]-r[u])+n[u]&&(c=!c),s=u;return!!c}},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var f=s(l),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:l,updater:y(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,v=0;function y(e,t){var n,r,o;if(t.singleton){var i=v++;n=h||(h=u(t)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=u(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);a[o].references--}for(var i=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=i}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),n(14);var o=n(3),i=n(7),a=(n(1),i.CONFIG.env.production.SOCKET_HOST);console.log=function(){};var s=document.querySelector("#app");if(s){var c={container:s,isDevMode:!1,socketHost:a,logs:!0};new o.App(r(r({},c),{client:{id:1,authKey:"123456789",firstName:"Denis",lastName:"Chertenko"}}))}},function(e,t,n){"use strict";n.r(t);var r=n(11),o=n.n(r),i=n(6),a={insert:"head",singleton:!1};o()(i.a,a);t.default=i.a.locals||{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanImitator=t.Lan=t.EventListener=t.App=void 0;var r=n(16);Object.defineProperty(t,"App",{enumerable:!0,get:function(){return r.App}});var o=n(22);Object.defineProperty(t,"EventListener",{enumerable:!0,get:function(){return o.EventListener}});var i=n(24);Object.defineProperty(t,"Lan",{enumerable:!0,get:function(){return i.Lan}}),Object.defineProperty(t,"LanImitator",{enumerable:!0,get:function(){return i.LanImitator}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var r=n(3),o=n(7),i=function(){function e(e){this.profileInfo=null,this.$container=e.container,this.options=e,this.client=e.client,this.game=new r.Game(this,e.container,o.CONFIG,{log:!1}),this.lan=new r.Lan(this),this.eventListener=new r.EventListener(this),this.init()}return e.prototype.init=function(){this.renderMenu(),this.lan.getProfileInfo()},e.prototype.setProfileInfo=function(e){this.profileInfo=e,this.renderMenu()},e.prototype.startGame=function(e){this.game.init(e)},e.prototype.clearMenu=function(){this.$container.innerHTML=""},e.prototype.renderMenu=function(){var e=this.profileInfo,t=this.client;this.$container.innerHTML=e?'\n      <div class="menu">\n        <h3>Привет, '+e.firstName+"!</h3>\n        <p>У тебя "+e.money+' ед. золота</p>\n        <p>Нажми "s" чтобы начать игру</p>\n      </div>\n    ':'\n      <div class="menu">\n        <h3>Привет, '+t.firstName+"!</h3>\n        <p>Загружаем твои данные...</p>\n      </div>\n    "},e}();t.App=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DRAWER_CONFIG=void 0,t.DRAWER_CONFIG={cell:{color:"#517330",borderColor:"#FFF",width:2},background:{color:"#a8e8f5"},field:{colors:{canTurn:"#178012",cannotTurn:"#fcffd6",cannotTurnAndAttack:"#eeff47",building:"#435246",activeCell:"#94f733",selectedActor:"#009688",hover:"#59ad2a",invisible:"#000",enemy:"red",enemyHover:"#f44336"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STAGE_CONFIG=void 0;var r=n(0);t.STAGE_CONFIG={width:900,height:600,cellSize:new r.Vector(85,58),grid:new r.Vector(15,15),stagePadding:1.5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.diff=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.spread=function(){return[this.x,this.y]},e}();t.Vector=r},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.INSTANCES_CONFIG=void 0;var i=n(0),a=n(4),s=n(8),c=new i.Vector(53,53);t.INSTANCES_CONFIG={actors:(r={},r[a.ActorNames.warrior]={size:c},r[a.ActorNames.spearman]={size:c},r[a.ActorNames.worker]={size:c},r),buildings:(o={},o[s.BuildingNames.main]={size:new i.Vector(130,130)},o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=void 0,t.ENV={development:{SOCKET_HOST:"http://localhost:5000"},production:{SOCKET_HOST:"https://boiling-depths-28880.herokuapp.com"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListener=void 0;var r=n(23);Object.defineProperty(t,"EventListener",{enumerable:!0,get:function(){return r.EventListener}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventListener=void 0;var r=n(0),o=function(){function e(e){this.app=e,this.$canvas=e.game.$canvas,this.startPos=new r.Vector(0,0),this.startOffset=new r.Vector(0,0),this.isDragging=!1,this.initListeners()}return e.prototype.initListeners=function(){this.$canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.$canvas.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.$canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.$canvas.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("contextmenu",(function(e){return e.preventDefault()}))},e.prototype.handleMouseDown=function(e){var t=this.app.game,n=t.viewOffset,o=(0,t.utils.convertPosition)(n,!0);this.isDragging=!0,this.startPos=new r.Vector(e.offsetX+o.x,e.offsetY+o.y),this.startOffset=new r.Vector(n.x,n.y)},e.prototype.handleMouseUp=function(e){var t=this.app.game,n=t.viewOffset;this.isDragging=!1;Math.abs(n.x-this.startOffset.x)<.08&&Math.abs(n.x-this.startOffset.x)<.08&&t.handleMouseClick(new r.Vector(e.offsetX,e.offsetY))},e.prototype.handleMouseMove=function(e){var t=this.app.game,n=new r.Vector(e.offsetX,e.offsetY);t.handleMouseMove(n),this.isDragging&&t.handleViewScroll(this.startPos.diff(n))},e.prototype.handleMouseLeave=function(){this.isDragging=!1},e.prototype.handleKeyDown=function(e){var t=this.app,n=t.game,r=t.lan,o=e.key.toLowerCase();"s"!==o&&"ы"!==o||this.app.profileInfo&&r.startGame(this.app.client),n.handleKeyDown(e)},e}();t.EventListener=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanImitator=t.Lan=void 0;var r=n(25);Object.defineProperty(t,"Lan",{enumerable:!0,get:function(){return r.Lan}});var o=n(26);Object.defineProperty(t,"LanImitator",{enumerable:!0,get:function(){return o.LanImitator}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lan=void 0;var r=n(3),o=n(9),i=function(){function e(e){this.app=e,this.lanImitator=new r.LanImitator(e),this.initListeners()}return e.prototype.initListeners=function(){var e=this,t=this.app,n=t.game.utils;this.subscribe(o.SocketListeners.attackInstance,(function(e){var t=e.hp,r=e.id,o=n.instances.getInstanceById(r);o&&o.update({hp:t})})),this.subscribe(o.SocketListeners.getProfileInfo,(function(t){e.app.setProfileInfo(t)})),this.subscribe(o.SocketListeners.startGame,(function(e){t.startGame(e)}))},e.prototype.getProfileInfo=function(){this.emit(o.SocketActions.getProfileInfo,this.app.options.client)},e.prototype.attackInstance=function(e){this.emit(o.SocketActions.attackInstance,e)},e.prototype.startGame=function(e){this.emit(o.SocketActions.startGame,e)},e.prototype.subscribe=function(e,t){r.EventEmitter.subscribe(e,t)},e.prototype.emit=function(e,t){r.EventEmitter.dispatch(this.lanImitator.imitateResponse({type:e,payload:t}))},e}();t.Lan=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanImitator=void 0;var r=n(0),o=n(9),i=function(){function e(e){this.app=e}return e.prototype.imitateResponse=function(e){switch(e.type){case o.SocketActions.getProfileInfo:return this.profileGetInfo();case o.SocketActions.attackInstance:return this.attackInstance(e);case o.SocketActions.startGame:return this.startGame();default:throw new Error("no implemented method for imitatating response!")}},e.prototype.startGame=function(){return{type:o.SocketListeners.startGame,payload:{players:{1:{startPosition:new r.Vector(3,3)},2:{startPosition:new r.Vector(8,6)},3:{startPosition:new r.Vector(3,8)}}}}},e.prototype.profileGetInfo=function(){return{type:o.SocketListeners.getProfileInfo,payload:{id:1,firstName:"Гость",lastName:"Неизвестный",money:100}}},e.prototype.attackInstance=function(e){var t=this.app.game.utils,n=e.payload,r=n.id,o=n.damage,i=0,a=t.instances.getInstanceById(r);return a&&(i=a.hp-o),{type:e.type,payload:{id:r,hp:i}}},e}();t.LanImitator=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Player=t.Selector=t.DrawUtils=t.InstanceUtils=t.Utils=t.Drawer=t.Game=void 0;var r=n(28);Object.defineProperty(t,"Game",{enumerable:!0,get:function(){return r.Game}});var o=n(43);Object.defineProperty(t,"Drawer",{enumerable:!0,get:function(){return o.Drawer}});var i=n(44);Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return i.Utils}}),Object.defineProperty(t,"InstanceUtils",{enumerable:!0,get:function(){return i.InstanceUtils}}),Object.defineProperty(t,"DrawUtils",{enumerable:!0,get:function(){return i.DrawUtils}});var a=n(68);Object.defineProperty(t,"Selector",{enumerable:!0,get:function(){return a.Selector}});var s=n(69);Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return s.Player}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var r=n(3),o=n(0),i=n(1).logger(),a=function(){function e(e,t,n,i){this.viewOffset=new o.Vector(0,0),this.mousePos=new o.Vector(0,0),this.instances=[],this.isInitialized=!1,this.app=e,this.$container=t,this.config=n,this.options=i;var a=n.stage,s=a.width,c=a.height,u=a.cellSize,l=document.createElement("canvas");l.className="canvas-game",l.width=s,l.height=c,this.$canvas=l,this.$ctx=l.getContext("2d"),this.drawer=new r.Drawer(this),this.utils=new r.Utils(this),this.selector=new r.Selector(this),this.player=new r.Player(this),this.stageCells=new o.Vector(Math.ceil(s/u.x)+1,Math.ceil(c/u.y)+1),this.viewOffset=new o.Vector(-n.stage.stagePadding,1.75*-n.stage.stagePadding)}return e.prototype.init=function(e){this.isInitialized||(this.isInitialized=!0,this.app.clearMenu(),this.$container.appendChild(this.$canvas),this.player.init(e),this.render())},e.prototype.handleViewScroll=function(e){this.viewOffset=this.utils.convertPosition(e)},e.prototype.handleMouseMove=function(e){this.mousePos=e},e.prototype.handleMouseClick=function(e){this.player.handleClick(e)},e.prototype.handleKeyDown=function(e){var t=this.player,n=e.key.toLocaleLowerCase();"i"===e.key&&console.log(this),"r"!==n&&"к"!==n||t.refreshTurn()},e.prototype.render=function(){var e=this,t=this.options.log,n=function(){var r=performance.now();e.drawer.draw(),t&&i("Время выполнения: "+(performance.now()-r)),window.requestAnimationFrame(n)};n()},e}();t.Game=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHexon=void 0;var r=n(5),o=n(0);t.createHexon=function(e){var t=r.getEvenXOffset(e.y),n=e.x+t,i=n+.5,a=e.y-.25;return[new o.Vector(i,a),new o.Vector(n+1,a+.5),new o.Vector(n+1,a+1),new o.Vector(i,a+1+.5),new o.Vector(n,a+1),new o.Vector(n,a+.5)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyCells=void 0;t.getEmptyCells=function(e,t){var n=[],r=[];return e.forEach((function(e){for(var o=!0,i=!0,a=0;a<t.length&&i;a++)for(var s=t[a],c=s.getPositions(),u=0;u<c.length;u++){var l=c[u];if(e.x===l.x&&e.y===l.y){o=!1,r.push(s),i=!1;break}}o&&n.push(e)})),{emptyCells:n,colliders:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCellInCells=void 0;t.isCellInCells=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e.x===r.x&&e.y===r.y)return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAngleBetweenPoints=void 0;t.getAngleBetweenPoints=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.atan2(r,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.angleToRadians=void 0,t.angleToRadians=function(e){return e*Math.PI/180}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPolygonInPolygon=void 0;var r=n(10),o=n(0);t.isPolygonInPolygon=function(e,t){for(var n=0;n<e.length;n++){var i=new o.Vector(e[n].x,e[n].y);if(r.isPointInPolygon(i,t))return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCellInRange=void 0;var r=n(5);t.isCellInRange=function(e,t,n){var o=Math.abs(e.x+r.getEvenXOffset(e.y,0,0)-(t.x+r.getEvenXOffset(t.y,0,0))),i=Math.abs(e.y-t.y);return!(o>n||i>n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCellsRange=void 0;var r=n(0),o=n(1);t.getCellsRange=function(e,t){for(var n=e.x,i=[],a=n-t,s=a;s<a+t;s++)i.push(new r.Vector(s,e.y));for(s=n+1;s<n+1+t;s++)i.push(new r.Vector(s,e.y));for(var c=o.getEvenXOffset(e.y,1,0),u=0,l=function(n){for(var a=o.getEvenXOffset(n,0,1),s=Math.floor(.5+u/2),l=Math.floor(u/2),f=c?s:l,p=c?l:s,d=e.x-t+f;d<e.x+t-p;d++)i.push(new r.Vector(d+a,n))},f=e.y+1;f<e.y+1+t;f++)l(f),u++;u=0;for(f=e.y-1;f>e.y-1-t;f--)l(f),u++;return i}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.getValidatedCells=void 0;var o=n(0),i=n(1);t.getValidatedCells=function(e,t,n,a){var s=r(n);return a.forEach((function(n){if("player"!==n.owner&&"building"!==n.type){var r=new o.Vector(n.pos.x+.5+i.getEvenXOffset(n.pos.y,.5,0),n.pos.y+.5),a=new o.Vector(e.x+.5+i.getEvenXOffset(e.y,.5,0),e.y+.5),c=i.getAngleBetweenPoints(r,a),u=t,l=i.angleToRadians(45),f=[new o.Vector(r.x,r.y),new o.Vector(r.x+u*Math.cos(c-l),r.y+u*Math.sin(c-l)),new o.Vector(r.x+u*Math.cos(c+l),r.y+u*Math.sin(c+l))];s=s.filter((function(e){return!i.isPolygonInPolygon(i.createHexon(e),f)}))}})),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValue=void 0;t.getRandomValue=function(){return[Date.now(),":",Math.random()].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPercent=void 0;t.getPercent=function(e,t,n){var r=e/t;return n?n*r:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;t.logger=function(e){void 0===e&&(e=50);var t=0;return function(n){++t>e&&(t=0,console.log(n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=void 0;t.getQuery=function(e,t){return new URLSearchParams(e).get(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCellsInCells=void 0;var r=n(1);t.isCellsInCells=function(e,t,n){for(var o=0,i=void 0!==n?n:e.length,a=0;a<e.length;a++){var s=e[a];r.isCellInCells(s,t)&&(o+=1)}return o>=i}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.Drawer=void 0;var o=n(0),i=n(1),a=function(){function e(e){this.debugPolygon=[],this.game=e,this.$ctx=e.$ctx,this.config=e.config.drawer,this.stagePadding=e.config.stage.stagePadding}return e.prototype.draw=function(){var e=this.game.config.stage,t=e.width,n=e.height;this.$ctx.clearRect(0,0,t,n),this.drawBackground(),this.drawGrid(),this.drawHighlightedHexons(),this.drawActiveHexons(),this.drawHoveredHexon(),this.drawInstances(),this.drawDebug()},e.prototype.drawBackground=function(){var e=this.$ctx,t=this.game,n=t.config.stage,i=n.cellSize,a=n.grid,s=a.x,c=a.y,u=t.utils,l=this.config.background.color;e.beginPath(),e.fillStyle=l,e.fillRect.apply(e,r(u.draw.getPosition(new o.Vector(-this.stagePadding,1.75*-this.stagePadding)).spread(),[(s+.5+2*this.stagePadding)*i.x,(c+.25+3.25*this.stagePadding)*i.y])),e.fill()},e.prototype.drawGrid=function(){for(var e=this.game.config.stage.grid,t=e.x,n=e.y,r=this.game,a=r.viewOffset,s=r.stageCells,c=r.player,u=this.config.cell.color,l=this.game.config.drawer.field.colors,f=s.x,p=s.y,d=Math.min(Math.max(Math.floor(a.x-.5),0),t-f),h=Math.min(Math.max(Math.floor(a.y-.5),0),n-p),v=d+f,y=h+p,g=d;g<v;g++)for(var b=h;b<y;b++)i.isCellInCells(new o.Vector(g,b),c.viewRange)?this.drawHexon(g,b,{color:u}):this.drawHexon(g,b,{color:l.invisible})},e.prototype.drawHighlightedHexons=function(){var e=this,t=this.game,n=t.instances,r=t.player,o=this.config.field.colors;n.forEach((function(t){if("building"===t.type){if(!i.isCellsInCells(t.posArray,r.viewRange,1))return;t.posArray.forEach((function(t){e.drawHexon(t.x,t.y,{color:o.building})}))}else{var n="";if("enemy"===t.owner)return;"player"===t.owner&&(n=t.canTurn||t.canAttack?t.canTurn&&t.canAttack?o.canTurn:o.cannotTurn:o.cannotTurnAndAttack),e.drawHexon(t.pos.x,t.pos.y,{color:n,alpha:.5})}}))},e.prototype.drawHoveredHexon=function(){var e=this.game.player.event,t=this.config.field.colors,n=this.game.utils.getHoveredCell(this.game.mousePos);n&&e&&"actorSelected"===e.type&&(i.isCellInCells(n,e.options.availableCellsForMove)&&this.drawHexon(n.x,n.y,{color:t.hover}),i.isCellInCells(n,e.options.availableBlockersCellsForAttack)&&this.drawHexon(n.x,n.y,{color:t.enemyHover}))},e.prototype.drawActiveHexons=function(){var e=this,t=this.game.player,n=this.config.field.colors,r=t.event;if(r&&"actorSelected"===r.type){var o=r.options,i=o.selected;this.drawHexon(i.pos.x,i.pos.y,{color:n.selectedActor,alpha:.5}),o.availableCellsForMove.forEach((function(t){e.drawHexon(t.x,t.y,{color:n.activeCell,alpha:.8})})),o.availableBlockersCellsForAttack.forEach((function(t){e.drawHexon(t.x,t.y,{color:n.enemy,alpha:.8})}))}},e.prototype.drawHexon=function(e,t,n){var r,a=this.$ctx,s=this.config.cell,c=s.width,u=s.borderColor,l=this.game.utils,f=i.createHexon(new o.Vector(e,t)),p=null!==(r=n.alpha)&&void 0!==r?r:1;a.globalAlpha=p;a.fillStyle=n.color,function(){a.beginPath(),a.moveTo.apply(a,l.draw.getPosition(new o.Vector(f[0].x,f[0].y)).spread());for(var e=1;e<f.length;e++)a.lineTo.apply(a,l.draw.getPosition(new o.Vector(f[e].x,f[e].y)).spread());a.closePath()}(),a.fill(),a.lineWidth=c,a.strokeStyle=u,a.stroke(),a.globalAlpha=1},e.prototype.drawInstances=function(){var e=this,t=this.game,n=t.instances,r=t.player;n.forEach((function(t){("enemy"!==t.owner||i.isCellsInCells(t.getPositions(),r.viewRange,1))&&t.draw(e.game)}))},e.prototype.drawDebug=function(){var e=this.$ctx,t=this.debugPolygon,n=this.game.utils;e.beginPath(),e.fillStyle="black",t.forEach((function(t,r){0===r?e.moveTo.apply(e,n.draw.getPosition(t).spread()):e.lineTo.apply(e,n.draw.getPosition(t).spread())})),e.closePath(),e.fill()},e}();t.Drawer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawUtils=t.InstanceUtils=t.Utils=void 0;var r=n(45);Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return r.Utils}});var o=n(46);Object.defineProperty(t,"InstanceUtils",{enumerable:!0,get:function(){return o.InstanceUtils}});var i=n(67);Object.defineProperty(t,"DrawUtils",{enumerable:!0,get:function(){return i.DrawUtils}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=n(0),o=n(3),i=n(1),a=function(){function e(e){var t=this;this.getViewPosition=function(e){var n=t.game.viewOffset;return new r.Vector(e.x+n.x,e.y+n.y)},this.getHoveredCell=function(e){for(var n=t.game,o=n.utils,a=n.mousePos,s=n.viewOffset,c=n.config.stage,u=c.cellSize,l=c.grid,f=l.x,p=l.y,d=!1,h=new r.Vector(0,0),v=o.getViewPosition(o.convertPosition(e)),y=Math.max(Math.floor(a.x/u.x+s.x)-1,0),g=Math.max(Math.floor(a.y/u.y+s.y)-1,0),b=!1,m=y;m<Math.min(y+3,f)&&!b;m++)for(var _=g;_<Math.min(g+3,p)&&!b;_++)i.isPointInPolygon(new r.Vector(v.x,v.y),i.createHexon(new r.Vector(m,_)))&&(d=!0,h=new r.Vector(m,_),b=!0);return d?new r.Vector(h.x,h.y):null},this.getCellsOnlyOnStage=function(e){var n=t.game.config;return e.filter((function(e){return!(e.x<0||e.y<0||e.x>n.stage.grid.x-1||e.y>n.stage.grid.y-1)}))},this.game=e,this.instances=new o.InstanceUtils(e),this.draw=new o.DrawUtils(e),this.convertPosition=this.convertPosition.bind(this)}return e.prototype.convertPosition=function(e,t){var n=this.game.config.stage.cellSize;return t?new r.Vector(e.x*n.x,e.y*n.y):new r.Vector(e.x/n.x,e.y/n.y)},e}();t.Utils=a},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceUtils=void 0;var o=n(0),i=n(47),a=n(63),s=n(1),c=function(){function e(e){var t=this;this.spawnBase=function(e,n){t.addInstance(a.MainBuilding,e,{owner:n}),t.addInstance(i.Worker,new o.Vector(e.x,e.y+2),{owner:n}),t.addInstance(i.Warrior,new o.Vector(e.x-1,e.y+2),{owner:n}),t.addInstance(i.Warrior,new o.Vector(e.x+1,e.y+2),{owner:n}),t.addInstance(i.Spearman,new o.Vector(e.x-1,e.y),{owner:n}),t.addInstance(i.Spearman,new o.Vector(e.x+1,e.y),{owner:n})},this.findInstanceByPos=function(e){for(var n=t.game.instances,r=0;r<n.length;r++)for(var o=n[r],i=o.getPositions(),a=0;a<i.length;a++)if(i[a].x===e.x&&i[a].y===e.y)return o;return null},this.getInstanceById=function(e){return t.game.instances.find((function(t){return t.options.id===e}))},this.game=e}return e.prototype.addInstance=function(e,t,n){this.game.instances.push(new e(this.game,t,r(r({},n),{id:s.getRandomValue()})))},e.prototype.removeInstanceById=function(e){var t=this.game.instances,n=t.findIndex((function(t){return t.options.id===e}));-1!==n&&t.splice(n,1)},e}();t.InstanceUtils=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.Spearman=t.Warrior=void 0;var r=n(48);Object.defineProperty(t,"Warrior",{enumerable:!0,get:function(){return r.Warrior}});var o=n(57);Object.defineProperty(t,"Spearman",{enumerable:!0,get:function(){return o.Spearman}});var i=n(60);Object.defineProperty(t,"Worker",{enumerable:!0,get:function(){return i.Worker}})},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Warrior=void 0;var a=n(2),s=n(4),c=i(n(55)),u=i(n(56)),l=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="actor",o.name=s.ActorNames.warrior,o.cellsForMoveRange=3,o.viewRange=4,o.attackRange=1,o.maxHp=100,o.hp=o.maxHp,o.damage=10,o.image=o.getImage({player:c.default,enemy:u.default}),o}return o(t,e),t}(a.Actor);t.Warrior=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instance=void 0;var r=n(50);Object.defineProperty(t,"Instance",{enumerable:!0,get:function(){return r.Instance}})},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.Instance=void 0;var o=n(0),i=n(1),a=function(){function e(e,t,n){this.owner="player",this.posArray=[],this.canTurn=!0,this.canAttack=!0,this.pos=t,this.options=n,this.game=e,this.owner=n.owner,this.setPosition(this.pos)}return e.prototype.getImage=function(e){var t=new Image;return t.src="player"===this.options.owner?e.player:e.enemy,t},e.prototype.setPosition=function(e){this.pos=new o.Vector(e.x,e.y)},e.prototype.newTurn=function(){this.canTurn=!0,this.canAttack=!0},e.prototype.drawHealthbar=function(){var e=this.game,t=e.$ctx,n=e.utils,a=e.config.stage.cellSize,s=n.draw.getVector(new o.Vector(this.pos.x+.25,this.pos.y-.15),this.pos);t.beginPath(),t.fillStyle="enemy"===this.owner?"red":"green",t.strokeStyle="#000",t.lineWidth=2,t.rect.apply(t,r(s.spread(),[a.x*i.getPercent(this.hp,this.maxHp,.5),7])),t.fill(),t.closePath(),t.beginPath(),t.rect.apply(t,r(s.spread(),[.5*a.x,7])),t.stroke(),t.closePath()},e.prototype.update=function(e){var t=this.game.utils;void 0!==e.hp&&(this.hp=e.hp),void 0!==e.canAttack&&(this.canAttack=e.canAttack),void 0!==e.canTurn&&(this.canTurn=e.canTurn),this.hp<=0&&t.instances.removeInstanceById(this.options.id)},e.prototype.draw=function(e){var t=e.$ctx,n=e.utils,r=e.config.stage.cellSize,i=this.getConfig(),a=n.draw.getCellOffset(i.size,r),s=n.draw.getVector(new o.Vector(this.pos.x+.5-a.x,this.pos.y+.5-a.y),this.pos);t.drawImage(this.image,s.x,s.y,i.size.x,i.size.y),this.drawHealthbar()},e}();t.Instance=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var r=n(52);Object.defineProperty(t,"Actor",{enumerable:!0,get:function(){return r.Actor}})},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;var i=n(2),a=n(0),s=n(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getCellsForMove=function(){return s.getCellsRange(this.pos,this.cellsForMoveRange)},t.prototype.getCellsForAttack=function(){return s.getCellsRange(this.pos,this.attackRange)},t.prototype.validateCellsForMove=function(e,t){return s.getValidatedCells(this.pos,this.cellsForMoveRange,e,t)},t.prototype.getAvailableCellsForAttack=function(e){var t=s.getCellsRange(this.pos,this.attackRange);return e.filter((function(e){return e.getPositions().some((function(n){return s.isCellInCells(n,t)&&"enemy"===e.owner}))}))},t.prototype.getPositions=function(){return[new a.Vector(this.pos.x,this.pos.y)]},t.prototype.getConfig=function(){return this.game.config.instances.actors[this.name]},t}(i.Instance);t.Actor=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Building=void 0;var r=n(54);Object.defineProperty(t,"Building",{enumerable:!0,get:function(){return r.Building}})},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Building=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getPositions=function(){return this.posArray},t.prototype.getConfig=function(){return this.game.config.instances.buildings[this.name]},t}(n(2).Instance);t.Building=i},function(e,t,n){"use strict";n.r(t),t.default=n.p+"027882bbcbe6940b99f57565b794d5e3.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"0bcdce4ce64a8c8d287834a340ee9002.png"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Spearman=void 0;var a=n(2),s=n(4),c=i(n(58)),u=i(n(59)),l=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="actor",o.name=s.ActorNames.spearman,o.cellsForMoveRange=1,o.viewRange=4,o.attackRange=2,o.maxHp=100,o.hp=o.maxHp,o.damage=15,o.image=o.getImage({player:c.default,enemy:u.default}),o}return o(t,e),t}(a.Actor);t.Spearman=l},function(e,t,n){"use strict";n.r(t),t.default=n.p+"c246e6caddc326ce44e95e6f309dd042.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"f3106a1a8b2aaf598c68d3ed38afe47f.png"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=void 0;var a=n(2),s=n(4),c=i(n(61)),u=i(n(62)),l=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="actor",o.name=s.ActorNames.worker,o.cellsForMoveRange=1,o.viewRange=4,o.attackRange=1,o.maxHp=100,o.hp=o.maxHp,o.damage=3,o.image=o.getImage({player:c.default,enemy:u.default}),o}return o(t,e),t}(a.Actor);t.Worker=l},function(e,t,n){"use strict";n.r(t),t.default=n.p+"552b429c1a862ff4c4d4a1ba00f14608.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fec91f62e62b23777f8bb7c9109efc2e.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainBuilding=void 0;var r=n(64);Object.defineProperty(t,"MainBuilding",{enumerable:!0,get:function(){return r.MainBuilding}})},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MainBuilding=void 0;var a=n(0),s=n(2),c=n(8),u=i(n(65)),l=i(n(66)),f=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="building",o.name=c.BuildingNames.main,o.viewRange=4,o.maxHp=100,o.hp=o.maxHp,o.image=o.getImage({player:u.default,enemy:l.default}),o}return o(t,e),t.prototype.setPosition=function(){var e=this.pos,t=this.pos.y%2!=0?1:-1;this.posArray=[new a.Vector(e.x,e.y),new a.Vector(e.x,e.y+1),new a.Vector(e.x+t,e.y+1)]},t.prototype.draw=function(e){var t=e.$ctx,n=e.utils,r=e.config.stage.cellSize,o=this.getConfig(),i=n.draw.getCellOffset(o.size,r),s=n.draw.getVector(new a.Vector(this.pos.x+.5-i.x,this.pos.y+.85-i.y),this.pos);t.drawImage(this.image,s.x,s.y,o.size.x,o.size.y),this.drawHealthbar()},t}(s.Building);t.MainBuilding=f},function(e,t,n){"use strict";n.r(t),t.default=n.p+"ab86495d34a11b13ad5fba1e3bb67cc9.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"2fdef8bb6a4e3566e381d8b8b574b072.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawUtils=void 0;var r=n(0),o=n(1),i=function(){function e(e){this.game=e}return e.prototype.getPosition=function(e){var t=this.game,n=t.viewOffset,o=t.config.stage.cellSize,i=this.game.utils.convertPosition(n,!0);return new r.Vector(e.x*o.x-i.x,e.y*o.y-i.y)},e.prototype.getVector=function(e,t){var n=e.x,i=e.y,a=o.getEvenXOffset(Math.floor(t.y));return this.getPosition(new r.Vector(n+a,i))},e.prototype.getCellOffset=function(e,t){return new r.Vector(e.x/t.x/2,e.y/t.y/2)},e}();t.DrawUtils=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selector=void 0;var r=n(0),o=function(){function e(e){this.selected={pos:new r.Vector(0,0),instance:null},this.game=e}return e.prototype.select=function(e){for(var t=this.game.instances,n=null,r=0;r<t.length;r++)for(var o=t[r],i=o.getPositions(),a=0;a<i.length;a++)if(i[a].x===e.x&&i[a].y===e.y){n=o;break}this.selected={pos:e,instance:n}},e.prototype.isSelected=function(){return!!this.selected.instance},e.prototype.getSelected=function(){return this.selected},e}();t.Selector=o},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var i=o(n(70)),a=n(1),s=function(){function e(e){this.viewRange=[],this.event=null,this.otherPlayers={},this.game=e}return e.prototype.init=function(e){var t=this,n=e.players;Object.entries(n).forEach((function(e){var n=e[0],r=e[1];+n===t.game.app.client.id?t.spawnBase(r.startPosition,"player"):(t.spawnBase(r.startPosition,"enemy"),t.otherPlayers[n]=r)})),this.updateViewRange()},e.prototype.updateViewRange=function(){var e=this,t=this.game.instances;this.viewRange=[],t.forEach((function(t){"enemy"!==t.owner&&t.getPositions().forEach((function(n){var r,o=a.getCellsRange(n,t.viewRange);(r=e.viewRange).push.apply(r,o)}))})),this.viewRange=i.default(this.viewRange,(function(e){return[e.x,e.y].join()}))},e.prototype.refreshTurn=function(){var e=this.game.instances;this.event=null,e.forEach((function(e){e.newTurn()}))},e.prototype.spawnBase=function(e,t){this.game.utils.instances.spawnBase(e,t)},e.prototype.resetEvent=function(){this.event=null},e.prototype.handleClick=function(e){var t=this.game,n=t.utils,r=t.selector,o=this.event,i=n.getHoveredCell(e);if(i){r.select(i);var s=r.selected,c=s.instance;if(c){if("player"===c.owner)"actor"===c.type&&this.handleSelectActor(s);else if(o&&"actorSelected"===o.type){var u=o.options.selected.instance,l=o.options.availableBlockersCellsForAttack;a.isCellInCells(i,l)&&this.attackInstance(u,c)}}else if(o&&"actorSelected"===o.type){var f=o.options;u=f.selected.instance;a.isCellInCells(i,f.availableCellsForMove)?this.moveActor(u,i):this.event=null}}},e.prototype.handleSelectActor=function(e){var t=this.game,n=t.instances,r=t.utils,o=e.instance,i=o.canTurn?r.getCellsOnlyOnStage(o.getCellsForMove()):[],s=a.getEmptyCells(i,n),c=s.emptyCells,u=s.colliders,l=o.validateCellsForMove(c,u),f=(o.canAttack?a.getEmptyCells(o.getCellsForAttack(),n):{colliders:[]}).colliders,p=o.getAvailableCellsForAttack(f);this.selectActor(e,l,u,p)},e.prototype.moveActor=function(e,t){e.setPosition(t),this.resetEvent(),this.updateViewRange(),e.update({canTurn:!1})},e.prototype.selectActor=function(e,t,n,o){var i=o.reduce((function(e,t){var n=t.getPositions();return r(e,n)}),[]);this.event={type:"actorSelected",options:{selected:e,availableCellsForMove:t,availableBlockersForAttack:o,availableBlockersCellsForAttack:i,blockers:n}}},e.prototype.attackInstance=function(e,t){var n=this.game.app.lan;this.resetEvent(),e.update({canAttack:!1}),n.attackInstance({id:t.options.id,damage:e.damage})},e}();t.Player=s},function(e,t,n){(function(e,n){var r="[object Arguments]",o="[object Map]",i="[object Object]",a="[object Set]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[r]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h["[object Function]"]=h[o]=h["[object Number]"]=h[i]=h["[object RegExp]"]=h[a]=h["[object String]"]=h["[object WeakMap]"]=!1;var v="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,g=v||y||Function("return this")(),b=t&&!t.nodeType&&t,m=b&&"object"==typeof n&&n&&!n.nodeType&&n,_=m&&m.exports===b&&v.process,w=function(){try{return _&&_.binding("util")}catch(e){}}(),P=w&&w.isTypedArray;function O(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!=t)return function(e,t,n,r){var o=e.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,I,n);var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function j(e,t,n){for(var r=-1,o=e?e.length:0;++r<o;)if(n(t,e[r]))return!0;return!1}function x(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function I(e){return e!=e}function M(e,t){return e.has(t)}function C(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function A(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function k(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var E,S,V,L=Array.prototype,R=Function.prototype,T=Object.prototype,D=g["__core-js_shared__"],H=(E=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",B=R.toString,N=T.hasOwnProperty,F=T.toString,U=RegExp("^"+B.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=g.Symbol,$=g.Uint8Array,z=T.propertyIsEnumerable,W=L.splice,X=(S=Object.keys,V=Object,function(e){return S(V(e))}),K=xe(g,"DataView"),Q=xe(g,"Map"),q=xe(g,"Promise"),Y=xe(g,"Set"),J=xe(g,"WeakMap"),Z=xe(Object,"create"),ee=Ve(K),te=Ve(Q),ne=Ve(q),re=Ve(Y),oe=Ve(J),ie=G?G.prototype:void 0,ae=ie?ie.valueOf:void 0,se=ie?ie.toString:void 0;function ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ue(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fe(e){var t=-1,n=e?e.length:0;for(this.__data__=new le;++t<n;)this.add(e[t])}function pe(e){this.__data__=new ue(e)}function de(e,t){var n=De(e)||Te(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!N.call(e,i)||o&&("length"==i||Me(i,r))||n.push(i);return n}function he(e,t){for(var n=e.length;n--;)if(Re(e[n][0],t))return n;return-1}function ve(e,t){for(var n=0,r=(t=Ce(t,e)?[t]:we(t)).length;null!=e&&n<r;)e=e[Se(t[n++])];return n&&n==r?e:void 0}function ye(e,t){return null!=e&&t in Object(e)}function ge(e,t,n,s,c){return e===t||(null==e||null==t||!Fe(e)&&!Ue(t)?e!=e&&t!=t:function(e,t,n,s,c,u){var l=De(e),f=De(t),p="[object Array]",d="[object Array]";l||(p=(p=Ie(e))==r?i:p);f||(d=(d=Ie(t))==r?i:d);var h=p==i&&!C(e),v=d==i&&!C(t),y=p==d;if(y&&!h)return u||(u=new pe),l||$e(e)?Oe(e,t,n,s,c,u):function(e,t,n,r,i,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new $(e),new $(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Re(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var u=A;case a:var l=2&s;if(u||(u=k),e.size!=t.size&&!l)return!1;var f=c.get(e);if(f)return f==t;s|=1,c.set(e,t);var p=Oe(u(e),u(t),r,i,s,c);return c.delete(e),p;case"[object Symbol]":if(ae)return ae.call(e)==ae.call(t)}return!1}(e,t,p,n,s,c,u);if(!(2&c)){var g=h&&N.call(e,"__wrapped__"),b=v&&N.call(t,"__wrapped__");if(g||b){var m=g?e.value():e,_=b?t.value():t;return u||(u=new pe),n(m,_,s,c,u)}}if(!y)return!1;return u||(u=new pe),function(e,t,n,r,o,i){var a=2&o,s=ze(e),c=s.length,u=ze(t).length;if(c!=u&&!a)return!1;var l=c;for(;l--;){var f=s[l];if(!(a?f in t:N.call(t,f)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var d=!0;i.set(e,t),i.set(t,e);var h=a;for(;++l<c;){f=s[l];var v=e[f],y=t[f];if(r)var g=a?r(y,v,f,t,e,i):r(v,y,f,e,t,i);if(!(void 0===g?v===y||n(v,y,r,o,i):g)){d=!1;break}h||(h="constructor"==f)}if(d&&!h){var b=e.constructor,m=t.constructor;b==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(d=!1)}return i.delete(e),i.delete(t),d}(e,t,n,s,c,u)}(e,t,ge,n,s,c))}function be(e){return!(!Fe(e)||function(e){return!!H&&H in e}(e))&&(Be(e)||C(e)?U:p).test(Ve(e))}function me(e){return"function"==typeof e?e:null==e?We:"object"==typeof e?De(e)?function(e,t){if(Ce(e)&&Ae(t))return ke(Se(e),t);return function(n){var r=function(e,t,n){var r=null==e?void 0:ve(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){t=Ce(t,e)?[t]:we(t);var r,o=-1,i=t.length;for(;++o<i;){var a=Se(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}if(r)return r;return!!(i=e?e.length:0)&&Ne(i)&&Me(a,i)&&(De(e)||Te(e))}(e,t,ye)}(n,e):ge(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){var t=ze(e),n=t.length;for(;n--;){var r=t[n],o=e[r];t[n]=[r,o,Ae(o)]}return t}(e);if(1==t.length&&t[0][2])return ke(t[0][0],t[0][1]);return function(n){return n===e||function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=n[o])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var f=new pe;if(r)var p=r(u,l,c,e,t,f);if(!(void 0===p?ge(l,u,r,3,f):p))return!1}}return!0}(n,e,t)}}(e):Ce(t=e)?(n=Se(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return ve(t,e)}}(t);var t,n}function _e(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||T,t!==r)return X(e);var t,n,r,o=[];for(var i in Object(e))N.call(e,i)&&"constructor"!=i&&o.push(i);return o}function we(e){return De(e)?e:Ee(e)}ce.prototype.clear=function(){this.__data__=Z?Z(null):{}},ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ce.prototype.get=function(e){var t=this.__data__;if(Z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return N.call(t,e)?t[e]:void 0},ce.prototype.has=function(e){var t=this.__data__;return Z?void 0!==t[e]:N.call(t,e)},ce.prototype.set=function(e,t){return this.__data__[e]=Z&&void 0===t?"__lodash_hash_undefined__":t,this},ue.prototype.clear=function(){this.__data__=[]},ue.prototype.delete=function(e){var t=this.__data__,n=he(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),!0)},ue.prototype.get=function(e){var t=this.__data__,n=he(t,e);return n<0?void 0:t[n][1]},ue.prototype.has=function(e){return he(this.__data__,e)>-1},ue.prototype.set=function(e,t){var n=this.__data__,r=he(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},le.prototype.clear=function(){this.__data__={hash:new ce,map:new(Q||ue),string:new ce}},le.prototype.delete=function(e){return je(this,e).delete(e)},le.prototype.get=function(e){return je(this,e).get(e)},le.prototype.has=function(e){return je(this,e).has(e)},le.prototype.set=function(e,t){return je(this,e).set(e,t),this},fe.prototype.add=fe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},fe.prototype.has=function(e){return this.__data__.has(e)},pe.prototype.clear=function(){this.__data__=new ue},pe.prototype.delete=function(e){return this.__data__.delete(e)},pe.prototype.get=function(e){return this.__data__.get(e)},pe.prototype.has=function(e){return this.__data__.has(e)},pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ue){var r=n.__data__;if(!Q||r.length<199)return r.push([e,t]),this;n=this.__data__=new le(r)}return n.set(e,t),this};var Pe=Y&&1/k(new Y([,-0]))[1]==1/0?function(e){return new Y(e)}:function(){};function Oe(e,t,n,r,o,i){var a=2&o,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var l=-1,f=!0,p=1&o?new fe:void 0;for(i.set(e,t),i.set(t,e);++l<s;){var d=e[l],h=t[l];if(r)var v=a?r(h,d,l,t,e,i):r(d,h,l,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!x(t,(function(e,t){if(!p.has(t)&&(d===e||n(d,e,r,o,i)))return p.add(t)}))){f=!1;break}}else if(d!==h&&!n(d,h,r,o,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function je(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function xe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return be(n)?n:void 0}var Ie=function(e){return F.call(e)};function Me(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Ce(e,t){if(De(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ge(e))||(c.test(e)||!s.test(e)||null!=t&&e in Object(t))}function Ae(e){return e==e&&!Fe(e)}function ke(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}(K&&"[object DataView]"!=Ie(new K(new ArrayBuffer(1)))||Q&&Ie(new Q)!=o||q&&"[object Promise]"!=Ie(q.resolve())||Y&&Ie(new Y)!=a||J&&"[object WeakMap]"!=Ie(new J))&&(Ie=function(e){var t=F.call(e),n=t==i?e.constructor:void 0,r=n?Ve(n):void 0;if(r)switch(r){case ee:return"[object DataView]";case te:return o;case ne:return"[object Promise]";case re:return a;case oe:return"[object WeakMap]"}return t});var Ee=Le((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Ge(e))return se?se.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(l,(function(e,t,r,o){n.push(r?o.replace(f,"$1"):t||e)})),n}));function Se(e){if("string"==typeof e||Ge(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ve(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Le(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Le.Cache||le),n}function Re(e,t){return e===t||e!=e&&t!=t}function Te(e){return function(e){return Ue(e)&&He(e)}(e)&&N.call(e,"callee")&&(!z.call(e,"callee")||F.call(e)==r)}Le.Cache=le;var De=Array.isArray;function He(e){return null!=e&&Ne(e.length)&&!Be(e)}function Be(e){var t=Fe(e)?F.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function Ne(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Fe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ue(e){return!!e&&"object"==typeof e}function Ge(e){return"symbol"==typeof e||Ue(e)&&"[object Symbol]"==F.call(e)}var $e=P?function(e){return function(t){return e(t)}}(P):function(e){return Ue(e)&&Ne(e.length)&&!!h[F.call(e)]};function ze(e){return He(e)?de(e):_e(e)}function We(e){return e}n.exports=function(e,t){return e&&e.length?function(e,t,n){var r=-1,o=O,i=e.length,a=!0,s=[],c=s;if(n)a=!1,o=j;else if(i>=200){var u=t?null:Pe(e);if(u)return k(u);a=!1,o=M,c=new fe}else c=t?[]:s;e:for(;++r<i;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(l)}else o(c,f,n)||(c!==s&&c.push(f),s.push(l))}return s}(e,me(t)):[]}}).call(this,n(71),n(72)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=t.Emitter=void 0;var r=function(){function e(){this.listeners=[]}return e.prototype.subscribe=function(e,t){this.listeners.push({type:e,cb:t})},e.prototype.dispatch=function(e){this.listeners.forEach((function(t){t.type===e.type&&(console.log("=== dispatch action ===",e),t.cb(e.payload))}))},e}();t.Emitter=r;var o=new r;t.EventEmitter=o}]);